FROM node:18-slim
WORKDIR /opt/gekko
RUN apt-get update && apt-get install -y git python3 build-essential && rm -rf /var/lib/apt/lists/*
# Clone Gekko at build time
RUN git clone https://github.com/askmike/gekko.git /opt/gekko || true
RUN cd /opt/gekko && npm install --production || true
COPY adapter_gekkonode.js /opt/gekko/adapter_gekkonode.js
EXPOSE 9002
CMD ["node","/opt/gekko/adapter_gekkonode.js"]
