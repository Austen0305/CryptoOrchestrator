# ==========================================
# CryptoOrchestrator Environment Variables
# ==========================================
# Copy this file to .env and fill in your values
# DO NOT COMMIT .env TO GIT (it contains sensitive information)
#
# Quick Start:
#   cp .env.example .env
#   # Edit .env with your values
# ==========================================

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================
NODE_ENV=development
# Options: development, staging, production, test
PORT=8000
HOST=0.0.0.0
API_VERSION=1.0.0
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR
LOG_FORMAT=text
# Options: text, json
LOG_DIR=./logs
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=14

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# Development (SQLite)
DATABASE_URL=sqlite+aiosqlite:///./data/app.db

# Production (PostgreSQL)
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/cryptoorchestrator

# Database Connection Pool Settings
DB_POOL_SIZE=50
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=60
DB_POOL_RECYCLE=3600

# Read Replicas (Optional - for high availability)
# ENABLE_READ_REPLICAS=false
# DB_READ_REPLICA_URLS=postgresql://user:password@replica1:5432/cryptoorchestrator,postgresql://user:password@replica2:5432/cryptoorchestrator

# ==========================================
# REDIS CONFIGURATION
# ==========================================
# Optional but recommended for caching and rate limiting
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=10

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
# Generate secure secrets:
#   JWT_SECRET: openssl rand -hex 32
#   EXCHANGE_KEY_ENCRYPTION_KEY: openssl rand -base64 32
JWT_SECRET=dev-secret-change-me-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
EXCHANGE_KEY_ENCRYPTION_KEY=dev-key-32-bytes-long-change-me

# ==========================================
# CORS CONFIGURATION
# ==========================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000
# For production, add your frontend domain:
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ==========================================
# TRADING CONFIGURATION
# ==========================================
DEFAULT_TRADING_MODE=paper
# Options: paper, real
ENABLE_MOCK_DATA=true
# Set to false in production
PRODUCTION_MODE=false
EXCHANGE_TIMEOUT=30
EXCHANGE_RETRY_ATTEMPTS=3

# ==========================================
# CACHE CONFIGURATION
# ==========================================
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
WS_PING_INTERVAL=20
WS_PING_TIMEOUT=10
WS_MAX_MESSAGE_SIZE=1048576

# ==========================================
# CELERY CONFIGURATION (Background Tasks)
# ==========================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ==========================================
# DEX TRADING CONFIGURATION
# ==========================================
# At least one DEX aggregator API key is required for DEX trading

# 0x Protocol API Key (Recommended)
# Get from: https://0x.org/docs/api
ZEROX_API_KEY=

# OKX DEX API Key
# Get from: https://www.okx.com/web3/build/docs/dex/aggregator
OKX_API_KEY=
OKX_SECRET_KEY=
OKX_PASSPHRASE=

# Rubic DEX API Key (Optional)
# Get from: https://rubic.exchange/
RUBIC_API_KEY=

# Affiliate Configuration (Optional)
AFFILIATE_FEE_RECIPIENT=
TRADE_SURPLUS_RECIPIENT=
ZEROX_AFFILIATE_FEE_BPS=0
PLATFORM_TRADING_FEE_BPS=20
CUSTODIAL_FEE_BPS=20
NON_CUSTODIAL_FEE_BPS=15

# ==========================================
# BLOCKCHAIN RPC CONFIGURATION
# ==========================================
# Required for blockchain interactions (wallet, DEX trading)
# Use public RPCs for development, private for production

# Ethereum Mainnet
ETHEREUM_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_KEY
# Or use public: https://eth.llamarpc.com

# Base
BASE_RPC_URL=https://base-mainnet.g.alchemy.com/v2/YOUR_KEY
# Or use public: https://mainnet.base.org

# Arbitrum
ARBITRUM_RPC_URL=https://arb-mainnet.g.alchemy.com/v2/YOUR_KEY
# Or use public: https://arb1.arbitrum.io/rpc

# Polygon
POLYGON_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/YOUR_KEY
# Or use public: https://polygon-rpc.com

# Optimism
OPTIMISM_RPC_URL=https://opt-mainnet.g.alchemy.com/v2/YOUR_KEY
# Or use public: https://mainnet.optimism.io

# Avalanche
AVALANCHE_RPC_URL=https://avalanche-mainnet.infura.io/v3/YOUR_KEY
# Or use public: https://api.avax.network/ext/bc/C/rpc

# BNB Chain
BNB_CHAIN_RPC_URL=https://bsc-dataseed.binance.org/
# Or use: https://bsc-dataseed1.binance.org/

# RPC Provider Settings
RPC_PROVIDER_TYPE=public
# Options: alchemy, infura, quicknode, public
RPC_API_KEY=
RPC_TIMEOUT=30
RPC_MAX_RETRIES=3

# ==========================================
# SUBSCRIPTION CONFIGURATION
# ==========================================
# NOTE: All subscriptions are now FREE - no payment processing required
# The free subscription service handles all subscription management
# No API keys or payment processing needed

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
# Optional - for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=
EMAIL_ENABLED=false

# ==========================================
# MONITORING & OBSERVABILITY
# ==========================================
# Sentry Error Tracking (Optional)
SENTRY_DSN=
ENABLE_SENTRY=false

# Prometheus Metrics
ENABLE_PROMETHEUS=true

# OpenTelemetry (Optional)
ENABLE_OPENTELEMETRY=false
OTEL_SERVICE_NAME=cryptoorchestrator
OTEL_SERVICE_VERSION=1.0.0
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_CONSOLE_EXPORTER=false
OTEL_PROMETHEUS=true

# ==========================================
# RATE LIMITING
# ==========================================
ENABLE_DISTRIBUTED_RATE_LIMIT=false
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100

# ==========================================
# FEATURE FLAGS
# ==========================================
ENABLE_2FA=true
ENABLE_KYC=true
ENABLE_COLD_STORAGE=true
ENABLE_STAKING=true
ENABLE_COPY_TRADING=true
ENABLE_DEX_TRADING=true
ENABLE_WITHDRAWAL_WHITELIST=true

# ==========================================
# COLD STORAGE CONFIGURATION
# ==========================================
COLD_STORAGE_THRESHOLD=10000.0
COLD_STORAGE_PROCESSING_HOURS=24

# ==========================================
# STAKING CONFIGURATION
# ==========================================
STAKING_MIN_AMOUNT=10.0
STAKING_REWARD_DISTRIBUTION_TIME=00:00

# ==========================================
# PERFORMANCE CONFIGURATION
# ==========================================
WORKERS=4
MAX_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65
REQUEST_TIMEOUT=30

# ==========================================
# FRONTEND CONFIGURATION (Vercel/Production)
# ==========================================
# These are used by the frontend build process
# Set in Vercel dashboard or deployment platform

# VITE_API_URL=https://your-backend-api.com
# VITE_WS_BASE_URL=wss://your-backend-api.com
# VITE_WALLETCONNECT_PROJECT_ID=
# VITE_VAPID_PUBLIC_KEY=

# ==========================================
# DEVELOPMENT ONLY
# ==========================================
# These settings are for development only
# Never enable in production

# ENABLE_HEAVY_MIDDLEWARE=false
# TESTING=false

# ==========================================
# NOTES
# ==========================================
# 1. Generate secure secrets for production:
#    - JWT_SECRET: openssl rand -hex 32
#    - EXCHANGE_KEY_ENCRYPTION_KEY: openssl rand -base64 32
#
# 2. For production:
#    - Set NODE_ENV=production
#    - Set PRODUCTION_MODE=true
#    - Set ENABLE_MOCK_DATA=false
#    - Use PostgreSQL (not SQLite)
#    - Use private RPC endpoints
#    - Enable Sentry for error tracking
#    - Configure proper CORS origins
#
# 3. For DEX trading:
#    - At least one DEX aggregator API key is required
#    - 0x Protocol is recommended (free tier available)
#
# 4. For blockchain interactions:
#    - At least one RPC URL is required
#    - Use public RPCs for development
#    - Use private RPCs (Alchemy, Infura) for production
#
# 5. For payments:
#    - Stripe keys required for payment processing
#    - Use test keys for development
#    - Use live keys for production
#
# 6. For email notifications:
#    - SMTP configuration required
#    - Gmail requires app password (not regular password)
#    - Set EMAIL_ENABLED=true to enable
